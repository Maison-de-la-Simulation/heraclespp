# SPDX-FileCopyrightText: 2025 The HERACLES++ development team, see COPYRIGHT.md file
#
# SPDX-License-Identifier: MIT

---
name: CMake checks

# yamllint disable-line rule:truthy
on:
  pull_request:
    paths:
      - '.github/workflows/cmake-checks.yaml'
      - 'CMakeLists.txt'
      - '**/CMakeLists.txt'
      - '**.cmake'
      - '**.cmake.in'
  workflow_dispatch:

permissions:
  contents: read

jobs:
  cmake-format:
    name: CMake format check using gersemi
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@93cb6efe18208431cddfb8368fd83d5badbf9bfd  # v5.0.1
      - name: Install gersemi
        run: pipx install gersemi~=0.19
      - name: Run gersemi
        run: |
          gersemi --check $(git ls-files '*.cmake' 'CMakeLists.txt' '*/CMakeLists.txt' ':!vendor')
